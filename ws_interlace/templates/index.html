{% extends 'base.html' %}
{% block title %}
    Homepage -
    {{ block.super }}
{% endblock title %}
{% block content %}

    <div class="list-group" style="width: 75%; margin-left: 2%; padding: 1%;">
      <h3>Please select a worksheet section from the sidebar.</h3>
    </div>
    <div class="row">
        <div class="col-lg-6" style="margin: 5%;">
          <ul>
            {% for worksheet in worksheets %}
            <li>{{ worksheet.name }}</li>
            {% endfor %}
          </ul>
        </div>
          <div class="col-lg-6" style="margin: 5%;">
      <table id="section_table" class="table">
          <thead>
            <tr>
                <th>Worksheet Name</th>
                <th>Section Name</th>
            </tr>
          </thead>
      </table>
    </div>
  </div>
  {% load staticfiles%}
    <script type="text/javascript">
        $(document).ready(function () {
            var table = $('#section_table').DataTable( {
              scrollY:        300,
              scrollCollapse: true,
              paging:         false,
              select: {
                style: 'os',
                items: 'cell'
              },
              "ajax": "{% static 'ajax/data.txt' %}"

            });

          table
            .on( 'select', function ( e, dt, type, indexes ) {
                var cellData = table.cells( indexes ).data().toArray();
                console.log(cellData[0])
                $.get('/maketable/', { json_data: JSON.stringify({ws_name: cellData[0]})}, function(data){
                  console.log("ajax get");
                  table.ajax.reload();
                });
        });


          } )
    </script>
{% endblock content %}
